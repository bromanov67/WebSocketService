# WebSocketService

WebSocketService — это приложение, которое позволяет отправлять и получать сообщения в реальном времени с использованием **SignalR**. Оно включает в себя серверную часть и клиентскую часть на JavaScript. Используется **Redis** для кэширования сообщений, что позволяет улучшить производительность и уменьшить нагрузку на базу данных.

## Основные функции
- Отправка сообщений через **API** и получение их в реальном времени через **WebSocket**.
- Хранение сообщений в базе данных **PostgreSQL**.
- **Кэширование**: Использование **Redis** для кэширования сообщений.
- Возможность просмотра истории сообщений за последние 10 минут.
- **Логирование** для отслеживания выполнения операций и диагностики ошибок.

## Использование
- API Документация:
    После запуска приложения, Swagger UI будет доступен по адресу https://localhost:7015/swagger, где можно посмотреть API эндпоинты.

- Отправка сообщений:
    Используйте эндпоинт **POST /api/messages/send** для отправки сообщений.

- Получение сообщений:
    Используйте эндпоинт **GET /api/messages/history** для получения истории сообщений за последние 10 минут.

- WebSockets:
    Для получения сообщений в реальном времени через WebSockets перейти по адресу https://localhost:7015/index.html


Для использования необходимо локально создать базу данных Messages в PostgreSQL:

- Откройте командную строку и подключитесь к PostgreSQL:
    
    ``` psql -U your_username -h localhost ```

- Замените your_username на имя пользователя PostgreSQL, которое вы используете.

- Создайте базу данных:
    ``` CREATE DATABASE messaging_db; ```

- Создайте таблицу для сообщений:
    ``` sql
        CREATE TABLE Messages (
            Id SERIAL PRIMARY KEY,
            Text VARCHAR(128) NOT NULL,
            CreatedAt TIMESTAMP NOT NULL,
            OrderNumber INT NOT NULL
        );
    ```
 - Заполнить **appsettings.Development.json**  своими данными